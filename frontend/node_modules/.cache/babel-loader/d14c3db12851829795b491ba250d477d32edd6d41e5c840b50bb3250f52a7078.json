{"ast":null,"code":"import React,{useState}from\"react\";import{RefreshCw,LogOut,Shield,User}from\"lucide-react\";import{Button}from\"./ui/button\";import{Badge}from\"./ui/badge\";import{useAuth}from\"../context/AuthContext\";import{utilityAPI}from\"../services/api\";import{toast}from\"sonner\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const{user,logout,isAdmin}=useAuth();const[isRefreshing,setIsRefreshing]=useState(false);const handleRefresh=async()=>{console.log(\"Refresh button clicked. Admin status:\",isAdmin());if(!isAdmin()){console.log(\"Not an admin, showing error\");toast.error(\"Only administrators can refresh data\");return;}try{console.log(\"Starting Excel refresh...\");setIsRefreshing(true);const result=await utilityAPI.refreshExcel();console.log(\"Refresh result:\",result);toast.success(\"Excel data refreshed successfully! Updated \".concat(result.count,\" employees.\"),{description:\"Last updated: \".concat(new Date().toLocaleString())});// Trigger a page reload to refresh all data\nsetTimeout(()=>{window.location.reload();},1000);}catch(error){var _error$response,_error$response2,_error$response2$data;console.error(\"Error refreshing data:\",error);console.error(\"Error details:\",(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data,error.message);toast.error(\"Failed to refresh Excel data: \".concat(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||error.message));}finally{setIsRefreshing(false);}};const handleLogout=()=>{logout();toast.success(\"Logged out successfully\");};return/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-lg border-b border-blue-200 \".concat(isAdmin()?'border-b-2':''),children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full \".concat(isAdmin()?'px-6 py-4':'px-4 py-2'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center \".concat(isAdmin()?'space-x-4':'space-x-3'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(isAdmin()?'space-x-4':'space-x-3'),children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://customer-assets.emergentagent.com/job_site-modifier-3/artifacts/j921etso_2%5B2%5D.png\",alt:\"Company Logo\",className:\"object-contain rounded-lg \".concat(isAdmin()?'h-24 w-24 shadow-md':'h-12 w-12 shadow-sm')}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-blue-600 \".concat(isAdmin()?'text-2xl':'text-lg'),children:\"Employee Management System\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(isAdmin()?'space-x-3':'space-x-2'),children:[/*#__PURE__*/_jsx(Badge,{variant:\"outline\",className:\"bg-orange-100 text-orange-700 border-orange-300 text-xs px-2 py-1\",children:\"Beta v1.0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center \".concat(isAdmin()?'space-x-3':'space-x-2'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-blue-900\",children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end \".concat(isAdmin()?'space-x-2':'space-x-1'),children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-600\",children:[\"ID: \",user===null||user===void 0?void 0:user.employeeId]}),/*#__PURE__*/_jsxs(Badge,{variant:isAdmin()?\"default\":\"secondary\",className:\"text-xs \".concat(isAdmin()?\"bg-blue-600\":\"bg-blue-100 text-blue-700\"),children:[isAdmin()?/*#__PURE__*/_jsx(Shield,{className:\"h-3 w-3 mr-1\"}):/*#__PURE__*/_jsx(User,{className:\"h-3 w-3 mr-1\"}),isAdmin()?\"Admin\":\"Employee\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(isAdmin()?'space-x-2':'space-x-1'),children:[isAdmin()&&/*#__PURE__*/_jsx(Button,{onClick:handleRefresh,disabled:isRefreshing,size:\"sm\",variant:\"outline\",className:\"flex items-center space-x-1 hover:bg-blue-50 border-blue-200\",children:/*#__PURE__*/_jsx(RefreshCw,{className:\"h-4 w-4 \".concat(isRefreshing?'animate-spin':'')})}),/*#__PURE__*/_jsxs(Button,{onClick:handleLogout,size:\"sm\",variant:\"outline\",className:\"flex items-center space-x-1 hover:bg-red-50 border-red-200 text-red-600\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Logout\"})]})]})]})]})})});};export default Header;","map":{"version":3,"names":["React","useState","RefreshCw","LogOut","Shield","User","Button","Badge","useAuth","utilityAPI","toast","jsx","_jsx","jsxs","_jsxs","Header","user","logout","isAdmin","isRefreshing","setIsRefreshing","handleRefresh","console","log","error","result","refreshExcel","success","concat","count","description","Date","toLocaleString","setTimeout","window","location","reload","_error$response","_error$response2","_error$response2$data","response","data","message","detail","handleLogout","className","children","src","alt","variant","name","employeeId","onClick","disabled","size"],"sources":["D:/SMARTDESK APPLICATION FILES/EMPLOYEE_DIR_BETA1/frontend/src/components/Header.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { RefreshCw, LogOut, Shield, User } from \"lucide-react\";\r\nimport { Button } from \"./ui/button\";\r\nimport { Badge } from \"./ui/badge\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { utilityAPI } from \"../services/api\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst Header = () => {\r\n  const { user, logout, isAdmin } = useAuth();\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n\r\n  const handleRefresh = async () => {\r\n    console.log(\"Refresh button clicked. Admin status:\", isAdmin());\r\n    \r\n    if (!isAdmin()) {\r\n      console.log(\"Not an admin, showing error\");\r\n      toast.error(\"Only administrators can refresh data\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log(\"Starting Excel refresh...\");\r\n      setIsRefreshing(true);\r\n      const result = await utilityAPI.refreshExcel();\r\n      console.log(\"Refresh result:\", result);\r\n      \r\n      toast.success(`Excel data refreshed successfully! Updated ${result.count} employees.`, {\r\n        description: `Last updated: ${new Date().toLocaleString()}`\r\n      });\r\n      \r\n      // Trigger a page reload to refresh all data\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n      }, 1000);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error refreshing data:\", error);\r\n      console.error(\"Error details:\", error.response?.data, error.message);\r\n      toast.error(`Failed to refresh Excel data: ${error.response?.data?.detail || error.message}`);\r\n    } finally {\r\n      setIsRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    toast.success(\"Logged out successfully\");\r\n  };\r\n\r\n  return (\r\n    <header className={`bg-white shadow-lg border-b border-blue-200 ${isAdmin() ? 'border-b-2' : ''}`}>\r\n      <div className={`w-full ${isAdmin() ? 'px-6 py-4' : 'px-4 py-2'}`}>\r\n        <div className=\"flex justify-between items-center\">\r\n          {/* Left side - Logo and System Name */}\r\n          <div className={`flex items-center ${isAdmin() ? 'space-x-4' : 'space-x-3'}`}>\r\n            <div className={`flex items-center ${isAdmin() ? 'space-x-4' : 'space-x-3'}`}>\r\n              <img \r\n                src=\"https://customer-assets.emergentagent.com/job_site-modifier-3/artifacts/j921etso_2%5B2%5D.png\"\r\n                alt=\"Company Logo\"\r\n                className={`object-contain rounded-lg ${isAdmin() ? 'h-24 w-24 shadow-md' : 'h-12 w-12 shadow-sm'}`}\r\n              />\r\n              <div>\r\n                <p className={`font-semibold text-blue-600 ${isAdmin() ? 'text-2xl' : 'text-lg'}`}>\r\n                  Employee Management System\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Right side - Beta Badge, Profile, Refresh, Logout */}\r\n          <div className={`flex items-center ${isAdmin() ? 'space-x-3' : 'space-x-2'}`}>\r\n            {/* Beta Version Badge */}\r\n            <Badge \r\n              variant=\"outline\" \r\n              className=\"bg-orange-100 text-orange-700 border-orange-300 text-xs px-2 py-1\"\r\n            >\r\n              Beta v1.0\r\n            </Badge>\r\n            \r\n            {/* User Info */}\r\n            <div className={`flex items-center ${isAdmin() ? 'space-x-3' : 'space-x-2'}`}>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-sm font-medium text-blue-900\">{user?.name}</p>\r\n                <div className={`flex items-center justify-end ${isAdmin() ? 'space-x-2' : 'space-x-1'}`}>\r\n                  <p className=\"text-xs text-blue-600\">ID: {user?.employeeId}</p>\r\n                  <Badge \r\n                    variant={isAdmin() ? \"default\" : \"secondary\"} \r\n                    className={`text-xs ${isAdmin() ? \"bg-blue-600\" : \"bg-blue-100 text-blue-700\"}`}\r\n                  >\r\n                    {isAdmin() ? <Shield className=\"h-3 w-3 mr-1\" /> : <User className=\"h-3 w-3 mr-1\" />}\r\n                    {isAdmin() ? \"Admin\" : \"Employee\"}\r\n                  </Badge>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className={`flex items-center ${isAdmin() ? 'space-x-2' : 'space-x-1'}`}>\r\n              {isAdmin() && (\r\n                <Button \r\n                  onClick={handleRefresh}\r\n                  disabled={isRefreshing}\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"flex items-center space-x-1 hover:bg-blue-50 border-blue-200\"\r\n                >\r\n                  <RefreshCw className={`h-4 w-4 ${isRefreshing ? 'animate-spin' : ''}`} />\r\n                </Button>\r\n              )}\r\n              \r\n              <Button \r\n                onClick={handleLogout}\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                className=\"flex items-center space-x-1 hover:bg-red-50 border-red-200 text-red-600\"\r\n              >\r\n                <LogOut className=\"h-4 w-4\" />\r\n                <span>Logout</span>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}